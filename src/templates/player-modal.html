<!-- Video Player Container (Shaka Player will be attached here) -->
<div id="video-player-container" style="
	position: relative; width: min(90vw, 1200px); height: min(70vh, 600px);
	background: #000; border-radius: 8px 8px 0 0; overflow: visible; padding-bottom: 50px;
">
	<!-- Navigation Arrows (Desktop only) -->
	<button id="prev-video-btn" class="nav-arrow prev-arrow" style="
		position: absolute; left: 10px; top: 50%; transform: translateY(-50%);
		width: 50px; height: 50px; border-radius: 50%; border: none;
		background: rgba(0,0,0,0.6); color: white; font-size: 24px;
		cursor: pointer; z-index: 1000; display: flex; align-items: center; justify-content: center;
		opacity: 0; transition: opacity 0.3s, background 0.2s;
	" title="Previous video (Shift+Left)">â€¹</button>
	
	<button id="next-video-btn" class="nav-arrow next-arrow" style="
		position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
		width: 50px; height: 50px; border-radius: 50%; border: none;
		background: rgba(0,0,0,0.6); color: white; font-size: 24px;
		cursor: pointer; z-index: 1000; display: flex; align-items: center; justify-content: center;
		opacity: 0; transition: opacity 0.3s, background 0.2s;
	" title="Next video (Shift+Right)">â€º</button>
	
	<video id="${videoId}" autoplay style="
		width: 100%; height: 100%; object-fit: contain; background: #000;
	"></video>
	
	<!-- High-resolution pause frame overlay -->
	<img id="pause-frame-display" style="
		width: 100%; height: calc(100% - 50px); object-fit: contain; background: #000;
		position: absolute; top: 0; left: 0; pointer-events: none;
		display: none;
	">
</div>

<!-- Clipping Controls Panel (Outside Shaka Player scope) -->
<div id="clipping-panel" style="
	width: min(90vw, 1200px); background: rgba(20,20,20,0.95); border-radius: 0 0 8px 8px;
	padding: 15px; display: none; border-top: 1px solid #444; position: relative; z-index: 10002;
">
	<!-- Clip Mode Toggle -->
	<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
		<h3 style="color: white; margin: 0; font-size: 16px;">ğŸ“¹ Video Clipping Mode</h3>
		<button id="exit-clip-mode" style="
			background: #666; border: none; color: white; padding: 6px 12px; 
			border-radius: 4px; cursor: pointer; font-size: 12px;">Exit Clip Mode</button>
	</div>
	
	<!-- Timeline with Clip Markers -->
	<div style="margin-bottom: 20px;">
		<div style="display: flex; justify-content: space-between; color: #ccc; font-size: 12px; margin-bottom: 5px;">
			<span>Timeline</span>
			<span id="clip-duration">Clip Duration: 0:00</span>
		</div>
		<div id="timeline-container" style="position: relative; height: 40px; background: #333; border-radius: 4px; overflow: hidden; cursor: pointer;">
			<div id="timeline-progress" style="height: 100%; background: #555; width: 0%; transition: width 0.1s;"></div>
			<div id="clip-range" style="
				position: absolute; top: 0; left: 0%; right: 0%; height: 100%; 
				background: rgba(76, 175, 80, 0.2); z-index: 1;
			"></div>
			<div id="playback-cursor" style="
				position: absolute; top: 0; left: 0%; width: 2px; height: 100%; 
				background: #fff; box-shadow: 0 0 4px rgba(255,255,255,0.8); z-index: 4;
			"></div>
			<div id="start-marker" style="
				position: absolute; top: -2px; left: 0%; width: 12px; height: 44px; 
				background: #4CAF50; cursor: ew-resize; z-index: 3; border-radius: 2px;
				display: flex; align-items: center; justify-content: center; color: white; font-size: 8px;
			" title="Start time">
				S
				<div id="start-marker-tooltip" style="
					position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%);
					background: rgba(0,0,0,0.9); color: white; padding: 4px 8px; border-radius: 4px;
					font-size: 11px; white-space: nowrap; pointer-events: none; display: none;
				">0:00.000</div>
			</div>
			<div id="end-marker" style="
				position: absolute; top: -2px; right: 0%; width: 12px; height: 44px; 
				background: #f44336; cursor: ew-resize; z-index: 3; border-radius: 2px;
				display: flex; align-items: center; justify-content: center; color: white; font-size: 8px;
			" title="End time">
				E
				<div id="end-marker-tooltip" style="
					position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%);
					background: rgba(0,0,0,0.9); color: white; padding: 4px 8px; border-radius: 4px;
					font-size: 11px; white-space: nowrap; pointer-events: none; display: none;
				">0:00.000</div>
			</div>
		</div>
	</div>
	
	<!-- Frame-Accurate Controls -->
	<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
		<!-- Start Time Controls -->
		<div style="background: rgba(76, 175, 80, 0.1); padding: 12px; border-radius: 6px; border: 1px solid #4CAF50;">
			<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
				<label style="color: #4CAF50; font-weight: bold; font-size: 14px;">ğŸŸ¢ Start Time</label>
				<span id="start-time-display" style="color: white; font-family: monospace;">0:00.000</span>
			</div>
			<div style="display: flex; gap: 8px; align-items: center;">
				<button id="start-frame-back" style="background: #4CAF50; border: none; color: white; padding: 6px 8px; border-radius: 3px; cursor: pointer; font-size: 11px;">âª -1f</button>
				<button id="start-set-current" style="background: #4CAF50; border: none; color: white; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 11px;">Set Current</button>
				<button id="start-frame-forward" style="background: #4CAF50; border: none; color: white; padding: 6px 8px; border-radius: 3px; cursor: pointer; font-size: 11px;">+1f â©</button>
			</div>
		</div>
		
		<!-- End Time Controls -->
		<div style="background: rgba(244, 67, 54, 0.1); padding: 12px; border-radius: 6px; border: 1px solid #f44336;">
			<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
				<label style="color: #f44336; font-weight: bold; font-size: 14px;">ğŸ”´ End Time</label>
				<span id="end-time-display" style="color: white; font-family: monospace;">0:00.000</span>
			</div>
			<div style="display: flex; gap: 8px; align-items: center;">
				<button id="end-frame-back" style="background: #f44336; border: none; color: white; padding: 6px 8px; border-radius: 3px; cursor: pointer; font-size: 11px;">âª -1f</button>
				<button id="end-set-current" style="background: #f44336; border: none; color: white; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 11px;">Set Current</button>
				<button id="end-frame-forward" style="background: #f44336; border: none; color: white; padding: 6px 8px; border-radius: 3px; cursor: pointer; font-size: 11px;">+1f â©</button>
			</div>
		</div>
	</div>
	
	<!-- Preview and Export Controls -->
	<div style="display: flex; justify-content: space-between; align-items: center;">
		<div style="display: flex; gap: 10px;">
			<button id="preview-clip" style="
				background: #2196F3; border: none; color: white; padding: 8px 16px; 
				border-radius: 4px; cursor: pointer; font-size: 14px;">ğŸ¬ Preview Clip</button>
			<button id="reset-markers" style="
				background: #666; border: none; color: white; padding: 8px 16px; 
				border-radius: 4px; cursor: pointer; font-size: 14px;">ğŸ”„ Reset</button>
		</div>
		<button id="export-clip" style="
			background: #FF9800; border: none; color: white; padding: 10px 20px; 
			border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: bold;">ğŸ“¤ Export Clip</button>
	</div>
</div>

<!-- Top Controls (Over video player) -->
<div style="position: absolute; top: 20px; left: 20px; z-index: 10003;">
	<div class="hls-player-badge" style="
		background: rgba(60, 60, 60, 0.9); color: #FF9800; 
		padding: 6px 12px; border-radius: 4px; font-size: 11px; font-weight: bold;
		letter-spacing: 0.5px; box-shadow: 0 2px 8px rgba(0,0,0,0.3);
		backdrop-filter: blur(4px); display: flex; align-items: center; gap: 6px;">
		<span style="font-size: 14px;">ğŸ“¡</span> HLS STREAMING
	</div>
</div>

<div style="position: absolute; top: 20px; right: 20px; display: flex; gap: 10px; z-index: 10003;">
	<button id="toggle-clip-mode" style="
		background: rgba(255, 152, 0, 0.9); border: none; color: white; 
		padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 12px;">âœ‚ï¸ Clip Video</button>
	<button id="open-default-player" style="
		background: rgba(33, 150, 243, 0.9); border: none; color: white; 
		padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; 
		display: flex; align-items: center; gap: 5px;" title="Open with default Nextcloud player">ğŸ¬ Default Player</button>
	<button class="close-btn" style="
		background: rgba(0,0,0,0.7); border: none; color: white; 
		width: 40px; height: 40px; border-radius: 50%; font-size: 18px; cursor: pointer;">âœ•</button>
</div>
